<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual UML Diagrams</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="uml_drag.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto px-4 py-12">
        <header class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-900">Visual UML Diagrams</h1>
            <p class="mt-2 text-lg text-gray-600">A visual breakdown of the Qt/QML Network Diagram Editor's architecture.</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-10">

            <!-- Diagram 1: C++ Backend -->
            <div class="bg-white rounded-lg p-6 diagram-card">
                <h2 class="text-2xl font-semibold mb-4 text-center">1. C++ Backend - Class Diagram</h2>
                <p class="text-center text-gray-600 mb-6">This diagram shows the core C++ classes that manage the application's data and logic. The `DiagramController` holds a list of `NetworkElement` objects, forming the central data model.</p>
                <div class="bg-gray-100 rounded-lg p-4 flex justify-center">
                    <svg width="650" height="300" viewBox="0 0 650 300" xmlns="http://www.w3.org/2000/svg">
                        <style>
                            .class-box { fill: #fff; stroke: #4a5568; stroke-width: 1.5; }
                            .class-title { font-size: 14px; font-weight: bold; font-family: 'Inter', sans-serif; }
                            .class-member { font-size: 12px; font-family: 'Inter', sans-serif; }
                            .connector { stroke: #4a5568; stroke-width: 1.5; fill: #4a5568; }
                        </style>
                        
                        <!-- DiagramController -->
                        <rect x="10" y="10" width="240" height="190" class="class-box" rx="5"/>
                        <text x="20" y="30" class="class-title">DiagramController</text>
                        <line x1="10" y1="40" x2="250" y2="40" stroke="#4a5568"/>
                        <text x="20" y="60" class="class-member">- m_elements: QList&lt;NetworkElement*&gt;</text>
                        <text x="20" y="75" class="class-member">- m_connections: QList&lt;ConnectionData&gt;</text>
                        <line x1="10" y1="90" x2="250" y2="90" stroke="#4a5568"/>
                        <text x="20" y="110" class="class-member">+ addElement(...)</text>
                        <text x="20" y="125" class="class-member">+ moveElement(...)</text>
                        <text x="20" y="140" class="class-member">+ addConnection(...)</text>
                        <text x="20" y="155" class="class-member">+ getElement(...)</text>
                        <text x="20" y="170" class="class-member">+ data(), rowCount()</text>

                        <!-- NetworkElement -->
                        <rect x="410" y="10" width="220" height="150" class="class-box" rx="5"/>
                        <text x="420" y="30" class="class-title">NetworkElement</text>
                        <line x1="410" y1="40" x2="630" y2="40" stroke="#4a5568"/>
                        <text x="420" y="60" class="class-member">- m_name: QString</text>
                        <text x="420" y="75" class="class-member">- m_type: QString</text>
                        <text x="420" y="90" class="class-member">- m_position: QPointF</text>
                        <line x1="410" y1="100" x2="630" y2="100" stroke="#4a5568"/>
                        <text x="420" y="120" class="class-member">+ name(), type()</text>
                        <text x="420" y="135" class="class-member">+ x(), y()</text>
                        
                        <!-- Connection -->
                        <line x1="250" y1="95" x2="370" y2="95" class="connector"/>
                        <polygon points="370,95 380,90 390,95 380,100" class="connector"/> <!-- Diamond -->
                        <text x="395" y="90" class="class-member">*</text>
                    </svg>
                </div>
            </div>

            <!-- Diagram 2: QML Frontend -->
            <div class="bg-white rounded-lg p-6 diagram-card">
                <h2 class="text-2xl font-semibold mb-4 text-center">2. QML Frontend - Component Diagram</h2>
                <p class="text-center text-gray-600 mb-6">This diagram illustrates how the QML components are structured. The `DiagramView` is the main container that dynamically creates `NetworkItem` and `Connection` components based on the C++ model.</p>
                 <div class="bg-gray-100 rounded-lg p-4 flex justify-center">
                    <svg width="600" height="350" viewBox="0 0 600 350" xmlns="http://www.w3.org/2000/svg">
                        <style>
                            .qml-box { fill: #ebf8ff; stroke: #3182ce; stroke-width: 1.5; }
                            .cpp-box { fill: #f7fafc; stroke: #718096; stroke-width: 1.5; }
                            .comp-title { font-size: 14px; font-weight: bold; font-family: 'Inter', sans-serif; }
                            .comp-label { font-size: 12px; font-family: 'Inter', sans-serif; }
                            .arrow { stroke: #4a5568; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead); }
                            .arrow-dashed { stroke-dasharray: 5,5; }
                        </style>
                        <defs>
                            <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#4a5568"/>
                            </marker>
                        </defs>
                        
                        <!-- DiagramView -->
                        <rect x="200" y="10" width="220" height="300" class="qml-box" rx="5"/>
                        <text x="265" y="35" class="comp-title">DiagramView.qml</text>
                        <text x="285" y="60" class="comp-label">Repeater</text>
                        <text x="275" y="75" class="comp-label">(for items)</text>
                        <text x="285" y="160" class="comp-label">Repeater</text>
                        <text x="265" y="175" class="comp-label">(for connections)</text>

                        <!-- NetworkItem -->
                        <rect x="450" y="50" width="140" height="50" class="qml-box" rx="5"/>
                        <text x="470" y="75" class="comp-title">NetworkItem.qml</text>

                        <!-- Connection -->
                        <rect x="450" y="150" width="140" height="50" class="qml-box" rx="5"/>
                        <text x="475" y="175" class="comp-title">Connection.qml</text>

                        <!-- DiagramController -->
                        <rect x="10" y="125" width="150" height="50" class="cpp-box" rx="5"/>
                        <text x="25" y="150" class="comp-title">DiagramController</text>

                        <!-- Arrows -->
                        <path d="M320,70 Q 385,70 450,75" class="arrow arrow-dashed"/>
                        <text x="360" y="65" class="comp-label">&lt;&lt;creates&gt;&gt;</text>
                        
                        <path d="M320,170 Q 385,170 450,175" class="arrow arrow-dashed"/>
                        <text x="360" y="190" class="comp-label">&lt;&lt;creates&gt;&gt;</text>
                        
                        <path d="M200,150 L 160,150" class="arrow arrow-dashed"/>
                        <text x="160" y="140" class="comp-label">&lt;&lt;uses&gt;&gt;</text>
                    </svg>
                 </div>
            </div>

            <!-- Diagram 3: System Interaction -->
            <div class="bg-white rounded-lg p-6 diagram-card">
                <h2 class="text-2xl font-semibold mb-4 text-center">3. System Interaction - Sequence Diagram</h2>
                <p class="text-center text-gray-600 mb-6">This diagram details the sequence of events when a user drags a network item, showing the flow of signals and function calls from the QML frontend to the C++ backend and back.</p>
                 <div class="bg-gray-100 rounded-lg p-4 flex justify-center">
                    <svg width="600" height="400" viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg">
                        <style>
                             .lifeline { stroke: #a0aec0; stroke-width: 1; stroke-dasharray: 4,4; }
                             .actor { font-size: 14px; font-weight: bold; font-family: 'Inter', sans-serif; }
                             .message { font-size: 12px; font-family: 'Inter', sans-serif; }
                             .arrow { stroke: #4a5568; stroke-width: 1.5; fill: none; marker-end: url(#arrowhead-seq); }
                             .reply-arrow { stroke: #718096; stroke-dasharray: 5,5; }
                        </style>
                        <defs>
                            <marker id="arrowhead-seq" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#4a5568"/>
                            </marker>
                        </defs>
                        
                        <!-- Participants -->
                        <text x="25" y="30" class="actor">User</text>
                        <line x1="50" y1="40" x2="50" y2="380" class="lifeline"/>

                        <text x="115" y="30" class="actor">NetworkItem.qml</text>
                        <line x1="160" y1="40" x2="160" y2="380" class="lifeline"/>
                        
                        <text x="265" y="30" class="actor">DiagramView.qml</text>
                        <line x1="310" y1="40" x2="310" y2="380" class="lifeline"/>

                        <text x="445" y="30" class="actor">DiagramController</text>
                        <line x1="490" y1="40" x2="490" y2="380" class="lifeline"/>

                        <!-- Messages -->
                        <path d="M50,80 L 160,80" class="arrow"/>
                        <text x="85" y="75" class="message">1. drag()</text>

                        <path d="M160,130 L 310,130" class="arrow"/>
                        <text x="200" y="125" class="message">2. positionUpdated() [signal]</text>

                        <path d="M310,180 L 490,180" class="arrow"/>
                        <text x="365" y="175" class="message">3. moveElement()</text>

                        <path d="M490,230 L 310,230" class="arrow reply-arrow"/>
                        <text x="365" y="225" class="message">4. dataChanged() [signal]</text>

                         <path d="M310,280 L 160,280" class="arrow reply-arrow"/>
                        <text x="195" y="275" class="message">5. (properties updated)</text>

                    </svg>
                 </div>
            </div>

        </div>
    </div>

</body>
</html>

